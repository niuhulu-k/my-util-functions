## 什么是执行上下文

执行上下文是评估和执行 JavaScript 代码的环境的抽象概念

## 执行上下文类型

- 全局上下文：任何不在函数中的代码都在全局上下文中，创建全局对象 window，设置 this 等于这个全局对象
- 函数执行上下文：当函数调用时，都会为该函数创建一个新的上下文。可有任意多个
- eval 函数执行上下文

## 执行栈-后进先出

当 js 引擎第一次执行脚本时会创建一个全局的执行上下文并压入执行栈，每当引擎遇到函数调用，会为该函数创建新的执行上下文并压入栈的顶部

引擎会执行栈顶的函数，函数执行完毕，执行上下文从栈中弹出，然后到下一个上下文


-  进入执行上下文:函数的所有形参 、函数声明、变量声明（由名称和对应值（undefined））
- 代码执行

```javascript
// https://github.com/mqyqingfeng/Blog/issues/5
function foo(a) {
  var b = 2;
  function c() {}
  var d = function() {};

  b = 3;

}

foo(1);

AO = {
    arguments: {
        0: 1,
        length: 1
    },
    a: 1,
    b: undefined,
    c: reference to function c(){},
    d: undefined
}

```
代码执行
在代码执行阶段，会顺序执行代码，根据代码，修改变量对象的值

还是上面的例子，当代码执行完后，这时候的 AO 是：
```javascript
AO = {
    arguments: {
        0: 1,
        length: 1
    },
    a: 1,
    b: 3,
    c: reference to function c(){},
    d: reference to FunctionExpression "d"
}
```
```javascript
console.log(foo);

function foo(){
    console.log("foo");
}

var foo = 1;
//会先处理函数声明，在处理变量声明
```
··详解
https://github.com/kuitos/kuitos.github.io/issues/18